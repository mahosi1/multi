<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>


<style>
    table,
    th,
    td {
        border: 1px solid black;
        border-collapse: collapse;
    }

    th,
    td {
        padding: 15px;
    }
</style>

<input type="text" value="rando 1" onclick="setRand(1);" style="width: 60px;" />
<input type="text" value="rando 2" onclick="setRand(2);" style="width: 60px;" />
<input type="text" value="rando 3" onclick="setRand(3);" style="width: 60px;" />
<input type="text" value="rando 4" onclick="setRand(4);" style="width: 60px;" />
<input type="text" value="rando 5" onclick="setRand(5);" style="width: 60px;" />


</br>
</br></br></br>


&nbsp;<input type="number" id="a1" maxlength="10" style="width: 100px;margin-left: 12px;margin-bottom: 10px;">
</br>
X <input type="number" id="a2" maxlength="10" style="width: 100px;margin-bottom: 10px;">

<hr style="width:120px; margin: 0px;">

<input type="submit" style="margin-top: 30px;" value="Calculate" onclick="DoMath()" />

<div id="problem" style="margin-top: 30px;">
</div>

<div id="carry" style="margin-top: 30px;">
</div>


<div id="work" style="margin-top: 5px;">
</div>


<div id="results" style="margin-top: 30px;">
</div>

<script type="text/javascript">

    function setRand(num) {
        document.getElementById("a1").value = rand(num);
        document.getElementById("a2").value = rand(num);
    }

    function rand(num) {
        var s = '';
        var k = '';
        while (s.length < num) {
            k = '';
            if (s === '') {
                k = (Math.floor(Math.random() * 9) + 1).toString();
            } else {
                k = (Math.floor(Math.random() * 9)).toString();
            }

            if (!s.includes(k))
                s += k;

        }
        return parseInt(s, 10);
    }


    function DoMath() {
        var firstNumber = document.getElementById("a1").value;
        var secondNumber = document.getElementById("a2").value;


        var table = document.createElement("TABLE");
        table.border = "1";

        var divTag = document.getElementById("problem");
        divTag.innerHTML = "";
        divTag.appendChild(table);



        var cells = (parseInt(firstNumber, 10) * parseInt(secondNumber, 10)).toString().length;

        loadTable(firstNumber, table, cells);

        loadTable(secondNumber, table, cells);


        table = document.createElement("TABLE");
        table.border = "1";


        divTag = document.getElementById("work");
        divTag.innerHTML = "";
        divTag.appendChild(table);




        var lines = [];

        var num1 = parseInt(firstNumber, 10);
        var reversed = reverseString(secondNumber);
        for (var i = 0; i < reversed.length; i++) {
            var theNum = parseInt(reversed[i], 10);
            theNum = Math.pow(10, i) * theNum;
            var val = (theNum * num1).toString();
            lines.push(val);
            if (val === "0") {
                var pad = num1.toString().length + i + 1;
                val = val.padStart(pad, '0');
            }
            loadTable(val, table, cells);
        }





        table = document.createElement("TABLE");
        table.border = "1";

        divTag = document.getElementById("results");
        divTag.innerHTML = "";
        divTag.appendChild(table);


        loadTable((parseInt(firstNumber, 10) * parseInt(secondNumber, 10)).toString(), table);




        //904
        //975


        table = document.createElement("TABLE");
        table.border = "1";
        table.style.backgroundColor = "DarkRed";
        table.style.color = "White";

        dvTable = document.getElementById("carry");
        dvTable.innerHTML = "";
        dvTable.appendChild(table);




        var max = lines[0].length;
        for (i = 1; i < lines.length; i++) {
            if (lines[i].length > max) max = lines[i].length;
        }

        for (i = 0; i < lines.length; i++) {
            lines[i] = lines[i].padStart(max, '0');
        }


        var abc = [];

        for (i = max - 1; i >= 0; i--) {
            var sum = 0;
            for (j = 0; j < lines.length; j++) {
                sum += parseInt(lines[j][i], 0)
            }
            abc.push(sum);
        }

        var def = [];
        var carry = 0;
        for (i = 0; i < abc.length; i++) {
            def.unshift(carry);
            var value = abc[i] + carry;
            carry = 0;
            if (i === 0) {
                if (value > 10) {
                    carry = 1;
                }
            } else {
                carry = parseInt(value / 10);
            }
        }



        loadTable(def, table);





    }

    function loadTable(num, table, spots) {
        var number1 = new Array();

        var tmp = [];
        if (spots) {
            var delta = spots - num.toString().length;
            for (var j = 0; j < delta; j++) {
                tmp.push('&nbsp;&nbsp;');
            }
        }
        for (var i = 0; i < num.length; i++) {
            tmp.push(num[i]);
        }
        number1.push(tmp);


        var columnCount = number1[0].length;

        var row = table.insertRow(-1);
        for (var i = 0; i < columnCount; i++) {
            var headerCell = document.createElement("TH");
            headerCell.innerHTML = number1[0][i];

            row.appendChild(headerCell);
        }
    }

    function logMouseOver() {
        console.log('here');
    }


    function reverseString(str) {
        var newString = "";
        for (var i = str.length - 1; i >= 0; i--) {
            newString += str[i];
        }
        return newString;
    }

</script>
